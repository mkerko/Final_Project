package by.epam.training.service;import by.epam.training.dao.DAOException;import by.epam.training.dao.DAOFactory;import by.epam.training.dao.ReservationDAO;import org.apache.log4j.Logger;import java.util.HashMap;/** * Class {@code BookService} is the class, that transfers information between DAO and Service. * @author Mikhail Kerko */public class BookService {    private static final BookService instance = new BookService();    private final static Logger logger = Logger.getRootLogger();    private static final String DATE_START="startDate";    private static final String DATE_END="endDate";    private static final String USER_ID="userID";    private static final String NUMBER_OF_GUESTS="guestNumber";    private static final String ROOM_ID="roomID";    private static final String ERROR_MESSAGE="We have such reservation.";    public static BookService getInstance(){        return instance;    }    /**     * <p>Takes information about request, calls necessary method.</p>     * @param parameters is the list of parameters, taken from service lay.     */    public void doService(HashMap<String,String> parameters) throws ServiceException {        try {            logger.info("====================[ BOOK ]=========================");            // read info from request            String startDate = parameters.get(DATE_START);            String endDate = parameters.get(DATE_END);            String userID = parameters.get(USER_ID);            String guestNumber = parameters.get(NUMBER_OF_GUESTS);            String roomID = parameters.get(ROOM_ID);            DAOFactory daoFactory = DAOFactory.getDAOFactory();            ReservationDAO reservationDAO = daoFactory.getReservationDAO();            boolean status = reservationDAO.checkReservation(startDate, endDate, userID, guestNumber, roomID);            if (!status) {                logger.info("Reservation is free.");                try {                    reservationDAO.createReservation(startDate, endDate, userID, guestNumber, roomID);                } catch (DAOException e) {                    throw new ServiceException(e);                }            } else {                logger.info("We have such reservation.");                throw new ServiceException(ERROR_MESSAGE);            }    }        catch (DAOException e) {            throw new ServiceException(e);        }    }}