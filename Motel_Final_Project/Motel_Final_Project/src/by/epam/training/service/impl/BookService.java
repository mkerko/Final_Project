package by.epam.training.service.impl;import by.epam.training.dao.DAOException;import by.epam.training.dao.DAOFactory;import by.epam.training.dao.ReservationDAO;import by.epam.training.domain.Reservation;import by.epam.training.service.ServiceException;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.text.DateFormat;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;import java.util.HashMap;import java.util.Locale;/** * Created by Михаил on 29.05.2016. */public class BookService {    private static final BookService instance = new BookService();    private static final String DATE_START="startDate";    private static final String DATE_END="endDate";    private static final String USER_ID="userID";    private static final String NUMBER_OF_GUESTS="guestNumber";    private static final String ROOM_ID="roomID";    private static final String PRICE="price";    private static final String COD="SHA-1";    private static final String ERROR_MESSAGE="We have such reservation.";    public static BookService getInstance(){        return instance;    }    public void doService(HashMap<String,String> parameters) throws ServiceException {        try {            System.out.println("====================[ BOOK ]=========================");            // read info from request            String startDate = parameters.get(DATE_START);            String endDate = parameters.get(DATE_END);            String userID = parameters.get(USER_ID);            String guestNumber = parameters.get(NUMBER_OF_GUESTS);            String roomID = parameters.get(ROOM_ID);            DAOFactory daoFactory = DAOFactory.getDAOFactory();            ReservationDAO reservationDAO = daoFactory.getReservationDAO();            boolean status = reservationDAO.checkReservation(startDate, endDate, userID, guestNumber, roomID);            if (!status) {                System.out.println("Reservation is free.");                //Reservation reservation = null;                try {                    reservationDAO.createReservation(startDate, endDate, userID, guestNumber, roomID);                    //reservation = reservationDAO.getReservation(startDate, endDate, userID, guestNumber, roomID);                } catch (DAOException e) {                    throw new ServiceException(e);                }            } else {                System.out.println("We have such reservation.");                throw new ServiceException(ERROR_MESSAGE);            }    }        catch (DAOException e) {            throw new ServiceException(e);        }    }}